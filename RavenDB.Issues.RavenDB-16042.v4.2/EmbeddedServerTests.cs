using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Text.RegularExpressions;
using NodaTime;
using Raven.Client.Documents.Conventions;
using Raven.Client.NodaTime;
using Raven.Embedded;
using Xunit;
using Flurl;
using Flurl.Http;
using Raven.Client.Documents.Operations;

namespace RavenDB.Issues.RavenDB_16042.v4_2
{
    public sealed class EmbeddedServerTests
    {
        public sealed class AutoIndexTests
        {
            [Fact]
            public void PutNewDocumentsAndQueryBy3Fields_ReturnsAllOfThem()
            {
                // arrange
                var serverUrl = "http://127.0.0.1:8080/";
                var databaseName = "Test_1";
                var serverOptions = new ServerOptions
                {
                    DataDirectory = Path.Combine(GetApplicationRoot(), "RavenDB"),
                    LogsPath = Path.Combine(GetApplicationRoot(), "Logs", "RavenDB"),
                    ServerUrl = serverUrl
                };
                var conventions = new DocumentConventions();
                conventions.ConfigureForNodaTime(DateTimeZoneProviders.Tzdb);
                var databaseOptions = new DatabaseOptions(databaseName)
                {
                    Conventions = conventions
                };
                EmbeddedServer.Instance.StartServer(serverOptions);

                // quick sanity check that proper db is in place and it is in initial state
                var documentStore = EmbeddedServer.Instance.GetDocumentStore(databaseOptions);
                var stats = documentStore.Maintenance.Send(new GetCollectionStatisticsOperation());
                var initialDocuments = documentStore.OpenSession().Advanced.RawQuery<dynamic>("from FeedingTask").ToList();
                if (initialDocuments.Count != 49 || stats.CountOfDocuments != 129)
                {
                    throw new InvalidOperationException($"Rollback the database {databaseName} to initial state");
                }

                // act
                // put 4 documents
                foreach (var document in TestData)
                {
                    serverUrl
                        .AppendPathSegments("databases", databaseName, "docs")
                        .SetQueryParam("id", document.Key)
                        .PutStringAsync(document.Value)
                        .GetAwaiter().GetResult();
                }

                // query put documents by ExecutionDate, Status and MixerId fields
                var result = serverUrl
                    .AppendPathSegments("databases", databaseName, "queries")
                    .PostStringAsync(
                        "{\"Query\":\"from FeedingTask where ExecutionDate = \\\"2020-10-28\\\" AND Status IN (\\\"Created\\\") AND MixerId = \\\"Mixer/1\\\"\"}")
                    .GetAwaiter().GetResult();

                // assert that all documents were queried
                var responseBody = result.GetJsonAsync().GetAwaiter().GetResult();
                Assert.Equal(4, responseBody.Results.Count);
            }

            private static readonly Dictionary<string, string> TestData = new Dictionary<string, string>
            {
                {
                    "FeedingTask/104",
                    "{\"Type\":\"Feeding\",\"DailyNumber\":1,\"RationId\":\"Ration/1\",\"Ration\":{\"Id\":\"Ration/1\",\"Name\":\"Д1\",\"Description\":\"\",\"Density\":350,\"IsPremix\":false,\"DryMatterProportion\":0.4202,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"D1\",\"UpperCode\":\"D1\"},\"Kind\":\"Diary\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":null,\"OrdinalNumber\":1,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":null,\"OrdinalNumber\":2,\"DryWeight\":4,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":null,\"OrdinalNumber\":3,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/5\",\"Ingredient\":null,\"OrdinalNumber\":4,\"DryWeight\":7,\"MixingTime\":\"00:00:10\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":null,\"OrdinalNumber\":5,\"DryWeight\":8,\"MixingTime\":\"00:01:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":null,\"OrdinalNumber\":6,\"DryWeight\":9.5,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2018-10-24T15:36:32.3376485+03:00\"},\"FeedingNumber\":1,\"IngredientLoadings\":[{\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"TargetOrdinalNumber\":1,\"ActualOrdinalNumber\":null,\"TargetWeight\":200,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"TargetOrdinalNumber\":2,\"ActualOrdinalNumber\":null,\"TargetWeight\":800,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/3\",\"Name\":\"Ingredients 3\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE3\",\"UpperCode\":\"INGRE3\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.9178469+03:00\",\"Timestamp\":\"2020-06-05T16:47:27.7245887+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"TargetOrdinalNumber\":3,\"ActualOrdinalNumber\":null,\"TargetWeight\":1000,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/5\",\"Name\":\"KK1\",\"Description\":\"\",\"Type\":\"CompoundFeed\",\"DigiStarMetadata\":{\"Code\":\"KK1\",\"UpperCode\":\"KK1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":600,\"Composition\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":0.25,\"Weight\":0.5,\"MixingTime\":\"00:01:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":2,\"DryWeight\":0.25,\"Weight\":0.5,\"MixingTime\":\"00:02:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":{\"Id\":\"Ingredient/3\",\"Name\":\"Ingredients 3\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE3\",\"UpperCode\":\"INGRE3\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.9178469+03:00\",\"Timestamp\":\"2020-06-05T16:47:27.7245887+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"OrdinalNumber\":3,\"DryWeight\":0.25,\"Weight\":0.5,\"MixingTime\":\"00:03:00\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":{\"Id\":\"Ingredient/4\",\"Name\":\"Ingredients 4\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE4\",\"UpperCode\":\"INGRE4\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.3482787+03:00\",\"Timestamp\":\"2020-06-05T16:47:32.3143545+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"OrdinalNumber\":4,\"DryWeight\":0.25,\"Weight\":0.5,\"MixingTime\":\"00:04:00\"}],\"DryMatterProportion\":0.5,\"Price\":1.5,\"CompoundFeedIngredients\":[]},\"TargetOrdinalNumber\":4,\"ActualOrdinalNumber\":null,\"TargetWeight\":1400,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:10\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/4\",\"Name\":\"Ingredients 4\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE4\",\"UpperCode\":\"INGRE4\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.3482787+03:00\",\"Timestamp\":\"2020-06-05T16:47:32.3143545+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"TargetOrdinalNumber\":5,\"ActualOrdinalNumber\":null,\"TargetWeight\":1600,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:01:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/0\",\"Name\":\"Вода\",\"Description\":\"Вода\",\"Type\":\"Water\",\"DigiStarMetadata\":{\"Code\":\"H2O\",\"UpperCode\":\"H2O\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":0,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0,\"Price\":0},\"TargetOrdinalNumber\":6,\"ActualOrdinalNumber\":null,\"TargetWeight\":950,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null}],\"PenUnloadings\":[{\"PenId\":\"Pen/1\",\"Pen\":{\"Id\":\"Pen/1\",\"Name\":\"11\",\"Description\":null,\"PenPhysiologicalGroups\":[{\"PhysiologicalGroupId\":\"PhysiologicalGroup/1\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/1\",\"Name\":\"Д1\",\"Description\":null,\"Kind\":\"Diary\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2018-10-24T15:36:35.5023715+03:00\"},\"HeadCount\":60},{\"PhysiologicalGroupId\":\"PhysiologicalGroup/2\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/2\",\"Name\":\"Д2\",\"Description\":null,\"Kind\":\"Diary\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2018-10-24T15:36:35.2536378+03:00\"},\"HeadCount\":40}],\"Appetite\":1,\"OrdinalNumber\":1,\"DontCombine\":false,\"DigiStarMetadata\":{\"Code\":\"11\",\"UpperCode\":\"11\"},\"MixerId\":\"Mixer/1\",\"Mixer\":null,\"RationId\":\"Ration/1\",\"Ration\":{\"Id\":\"Ration/1\",\"Name\":\"Д1\",\"Description\":\"\",\"Density\":350,\"IsPremix\":false,\"DryMatterProportion\":0.4202,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"D1\",\"UpperCode\":\"D1\"},\"Kind\":\"Diary\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":null,\"OrdinalNumber\":1,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":null,\"OrdinalNumber\":2,\"DryWeight\":4,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":null,\"OrdinalNumber\":3,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/5\",\"Ingredient\":null,\"OrdinalNumber\":4,\"DryWeight\":7,\"MixingTime\":\"00:00:10\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":null,\"OrdinalNumber\":5,\"DryWeight\":8,\"MixingTime\":\"00:01:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":null,\"OrdinalNumber\":6,\"DryWeight\":9.5,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2018-10-24T15:36:32.3376485+03:00\"},\"CreatedAt\":\"2018-10-24T15:36:36.3578469+03:00\",\"MilkProductivities\":[],\"RationParts\":[0.5,0.5]},\"TargetOrdinalNumber\":1,\"ActualOrdinalNumber\":null,\"TargetAsFedWeight\":2975,\"ActualInitialAsFedWeight\":null,\"ActualAdjustedAsFedWeight\":null,\"StartedAt\":null,\"CompletedAt\":null,\"UnloadingStatus\":\"Pending\",\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"CargoLoadingType\":\"Unloading\",\"InitialMixerWeight\":null,\"IsExecuting\":false},{\"PenId\":\"Pen/2\",\"Pen\":{\"Id\":\"Pen/2\",\"Name\":\"12\",\"Description\":null,\"PenPhysiologicalGroups\":[{\"PhysiologicalGroupId\":\"PhysiologicalGroup/2\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/2\",\"Name\":\"Д2\",\"Description\":null,\"Kind\":\"Diary\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2018-10-24T15:36:35.2536378+03:00\"},\"HeadCount\":30},{\"PhysiologicalGroupId\":\"PhysiologicalGroup/1\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/1\",\"Name\":\"Д1\",\"Description\":null,\"Kind\":\"Diary\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2018-10-24T15:36:35.5023715+03:00\"},\"HeadCount\":70}],\"Appetite\":1,\"OrdinalNumber\":2,\"DontCombine\":false,\"DigiStarMetadata\":{\"Code\":\"12\",\"UpperCode\":\"12\"},\"MixerId\":\"Mixer/1\",\"Mixer\":null,\"RationId\":\"Ration/1\",\"Ration\":{\"Id\":\"Ration/1\",\"Name\":\"Д1\",\"Description\":\"\",\"Density\":350,\"IsPremix\":false,\"DryMatterProportion\":0.4202,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"D1\",\"UpperCode\":\"D1\"},\"Kind\":\"Diary\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":null,\"OrdinalNumber\":1,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":null,\"OrdinalNumber\":2,\"DryWeight\":4,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":null,\"OrdinalNumber\":3,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/5\",\"Ingredient\":null,\"OrdinalNumber\":4,\"DryWeight\":7,\"MixingTime\":\"00:00:10\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":null,\"OrdinalNumber\":5,\"DryWeight\":8,\"MixingTime\":\"00:01:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":null,\"OrdinalNumber\":6,\"DryWeight\":9.5,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2018-10-24T15:36:32.3376485+03:00\"},\"CreatedAt\":\"2018-10-24T15:36:36.8370786+03:00\",\"MilkProductivities\":[],\"RationParts\":[0.5,0.5]},\"TargetOrdinalNumber\":2,\"ActualOrdinalNumber\":null,\"TargetAsFedWeight\":2975,\"ActualInitialAsFedWeight\":null,\"ActualAdjustedAsFedWeight\":null,\"StartedAt\":null,\"CompletedAt\":null,\"UnloadingStatus\":\"Pending\",\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"CargoLoadingType\":\"Unloading\",\"InitialMixerWeight\":null,\"IsExecuting\":false}],\"MixerId\":\"Mixer/1\",\"Mixer\":{\"Id\":\"Mixer/1\",\"Name\":\"46\",\"Description\":\"\",\"Volume\":46,\"Pens\":null,\"Weight\":null,\"DataTransferType\":\"DigiStar\",\"CreatedAt\":null},\"Status\":\"Created\",\"State\":{\"Status\":\"Created\",\"OrdinalNumber\":null},\"CreatedAt\":\"2020-12-23T15:51:18.5296428+03:00\",\"StartedAt\":null,\"CompletedAt\":null,\"IsCompletedByUser\":null,\"CanceledAt\":null,\"RestoredAt\":null,\"ExecutionDate\":\"2020-10-28\",\"MixerOperator\":null,\"LoaderOperators\":null,\"@metadata\":{\"@collection\":\"FeedingTask\",\"Raven-Clr-Type\":\"EkoPoint.Feeding.Domain.Models.FeedingTask, EkoPoint.Feeding.Domain\",\"source-of-change\":\"User\"}}"
                },
                {
                    "FeedingTask/105",
                    "{\"Type\":\"Feeding\",\"DailyNumber\":2,\"RationId\":\"Ration/2\",\"Ration\":{\"Id\":\"Ration/2\",\"Name\":\"Cyh1\",\"Description\":\"\",\"Density\":250,\"IsPremix\":false,\"DryMatterProportion\":0.46875,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"CYH1\",\"UpperCode\":\"CYH1\"},\"Kind\":\"Dry\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":2,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":2,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":{\"Id\":\"Ingredient/3\",\"Name\":\"Ingredients 3\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE3\",\"UpperCode\":\"INGRE3\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.9178469+03:00\",\"Timestamp\":\"2020-06-05T16:47:27.7245887+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"OrdinalNumber\":3,\"DryWeight\":4,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/7\",\"Ingredient\":{\"Id\":\"Ingredient/7\",\"Name\":\"KK2\",\"Description\":null,\"Type\":\"CompoundFeed\",\"DigiStarMetadata\":{\"Code\":\"KK2\",\"UpperCode\":\"KK2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":600,\"Composition\":[{\"IngredientId\":\"Ingredient/6\",\"Ingredient\":{\"Id\":\"Ingredient/6\",\"Name\":\"Ingredients 5\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE5\",\"UpperCode\":\"INGE5\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2019-01-10T08:52:04.3819690+03:00\",\"Timestamp\":\"2020-06-05T16:47:36.8403285+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":1,\"Weight\":2,\"MixingTime\":\"00:00:00\"}],\"DryMatterProportion\":0.5,\"Price\":2,\"CompoundFeedIngredients\":[]},\"OrdinalNumber\":4,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":{\"Id\":\"Ingredient/4\",\"Name\":\"Ingredients 4\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE4\",\"UpperCode\":\"INGRE4\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.3482787+03:00\",\"Timestamp\":\"2020-06-05T16:47:32.3143545+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"OrdinalNumber\":5,\"DryWeight\":3,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":{\"Id\":\"Ingredient/0\",\"Name\":\"Вода\",\"Description\":\"Вода\",\"Type\":\"Water\",\"DigiStarMetadata\":{\"Code\":\"H2O\",\"UpperCode\":\"H2O\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":0,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0,\"Price\":0},\"OrdinalNumber\":6,\"DryWeight\":0,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2018-10-24T15:36:31.8371480+03:00\"},\"FeedingNumber\":1,\"IngredientLoadings\":[{\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"TargetOrdinalNumber\":1,\"ActualOrdinalNumber\":null,\"TargetWeight\":400,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"TargetOrdinalNumber\":2,\"ActualOrdinalNumber\":null,\"TargetWeight\":200,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/3\",\"Name\":\"Ingredients 3\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE3\",\"UpperCode\":\"INGRE3\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.9178469+03:00\",\"Timestamp\":\"2020-06-05T16:47:27.7245887+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"TargetOrdinalNumber\":3,\"ActualOrdinalNumber\":null,\"TargetWeight\":800,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/7\",\"Name\":\"KK2\",\"Description\":null,\"Type\":\"CompoundFeed\",\"DigiStarMetadata\":{\"Code\":\"KK2\",\"UpperCode\":\"KK2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":600,\"Composition\":[{\"IngredientId\":\"Ingredient/6\",\"Ingredient\":{\"Id\":\"Ingredient/6\",\"Name\":\"Ingredients 5\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE5\",\"UpperCode\":\"INGE5\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2019-01-10T08:52:04.3819690+03:00\",\"Timestamp\":\"2020-06-05T16:47:36.8403285+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":1,\"Weight\":2,\"MixingTime\":\"00:00:00\"}],\"DryMatterProportion\":0.5,\"Price\":2,\"CompoundFeedIngredients\":[]},\"TargetOrdinalNumber\":4,\"ActualOrdinalNumber\":null,\"TargetWeight\":1000,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/4\",\"Name\":\"Ingredients 4\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE4\",\"UpperCode\":\"INGRE4\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.3482787+03:00\",\"Timestamp\":\"2020-06-05T16:47:32.3143545+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"TargetOrdinalNumber\":5,\"ActualOrdinalNumber\":null,\"TargetWeight\":600,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null}],\"PenUnloadings\":[{\"PenId\":\"Pen/3\",\"Pen\":{\"Id\":\"Pen/3\",\"Name\":\"21\",\"Description\":null,\"PenPhysiologicalGroups\":[{\"PhysiologicalGroupId\":\"PhysiologicalGroup/3\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/3\",\"Name\":\"Сух\",\"Description\":null,\"Kind\":\"Dry\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2019-10-14T11:09:43.9109939+03:00\"},\"HeadCount\":100}],\"Appetite\":1,\"OrdinalNumber\":3,\"DontCombine\":false,\"DigiStarMetadata\":{\"Code\":\"21\",\"UpperCode\":\"21\"},\"MixerId\":\"Mixer/1\",\"Mixer\":null,\"RationId\":\"Ration/2\",\"Ration\":{\"Id\":\"Ration/2\",\"Name\":\"Cyh1\",\"Description\":\"\",\"Density\":250,\"IsPremix\":false,\"DryMatterProportion\":0.46875,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"CYH1\",\"UpperCode\":\"CYH1\"},\"Kind\":\"Dry\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":2,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":2,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":{\"Id\":\"Ingredient/3\",\"Name\":\"Ingredients 3\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE3\",\"UpperCode\":\"INGRE3\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.9178469+03:00\",\"Timestamp\":\"2020-06-05T16:47:27.7245887+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"OrdinalNumber\":3,\"DryWeight\":4,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/7\",\"Ingredient\":{\"Id\":\"Ingredient/7\",\"Name\":\"KK2\",\"Description\":null,\"Type\":\"CompoundFeed\",\"DigiStarMetadata\":{\"Code\":\"KK2\",\"UpperCode\":\"KK2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":600,\"Composition\":[{\"IngredientId\":\"Ingredient/6\",\"Ingredient\":{\"Id\":\"Ingredient/6\",\"Name\":\"Ingredients 5\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE5\",\"UpperCode\":\"INGE5\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2019-01-10T08:52:04.3819690+03:00\",\"Timestamp\":\"2020-06-05T16:47:36.8403285+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":1,\"Weight\":2,\"MixingTime\":\"00:00:00\"}],\"DryMatterProportion\":0.5,\"Price\":2,\"CompoundFeedIngredients\":[]},\"OrdinalNumber\":4,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":{\"Id\":\"Ingredient/4\",\"Name\":\"Ingredients 4\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE4\",\"UpperCode\":\"INGRE4\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.3482787+03:00\",\"Timestamp\":\"2020-06-05T16:47:32.3143545+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"OrdinalNumber\":5,\"DryWeight\":3,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":{\"Id\":\"Ingredient/0\",\"Name\":\"Вода\",\"Description\":\"Вода\",\"Type\":\"Water\",\"DigiStarMetadata\":{\"Code\":\"H2O\",\"UpperCode\":\"H2O\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":0,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0,\"Price\":0},\"OrdinalNumber\":6,\"DryWeight\":0,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2018-10-24T15:36:31.8371480+03:00\"},\"CreatedAt\":\"2019-10-14T11:09:32.9292774+03:00\",\"MilkProductivities\":[],\"RationParts\":[1]},\"TargetOrdinalNumber\":1,\"ActualOrdinalNumber\":null,\"TargetAsFedWeight\":3000,\"ActualInitialAsFedWeight\":null,\"ActualAdjustedAsFedWeight\":null,\"StartedAt\":null,\"CompletedAt\":null,\"UnloadingStatus\":\"Pending\",\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"CargoLoadingType\":\"Unloading\",\"InitialMixerWeight\":null,\"IsExecuting\":false}],\"MixerId\":\"Mixer/1\",\"Mixer\":{\"Id\":\"Mixer/1\",\"Name\":\"46\",\"Description\":\"\",\"Volume\":46,\"Pens\":null,\"Weight\":null,\"DataTransferType\":\"DigiStar\",\"CreatedAt\":null},\"Status\":\"Created\",\"State\":{\"Status\":\"Created\",\"OrdinalNumber\":null},\"CreatedAt\":\"2020-12-23T15:51:19.0930521+03:00\",\"StartedAt\":null,\"CompletedAt\":null,\"IsCompletedByUser\":null,\"CanceledAt\":null,\"RestoredAt\":null,\"ExecutionDate\":\"2020-10-28\",\"MixerOperator\":null,\"LoaderOperators\":null,\"@metadata\":{\"@collection\":\"FeedingTask\",\"Raven-Clr-Type\":\"EkoPoint.Feeding.Domain.Models.FeedingTask, EkoPoint.Feeding.Domain\",\"source-of-change\":\"User\"}}"
                },
                {
                    "FeedingTask/106",
                    "{\"Type\":\"Feeding\",\"DailyNumber\":3,\"RationId\":\"Ration/3\",\"Ration\":{\"Id\":\"Ration/3\",\"Name\":\"Нетели\",\"Description\":null,\"Density\":250,\"IsPremix\":false,\"DryMatterProportion\":0.5,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"NET\",\"UpperCode\":\"NET\"},\"Kind\":\"Young\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":2,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":{\"Id\":\"Ingredient/0\",\"Name\":\"Вода\",\"Description\":\"Вода\",\"Type\":\"Water\",\"DigiStarMetadata\":{\"Code\":\"H2O\",\"UpperCode\":\"H2O\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":0,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0,\"Price\":0},\"OrdinalNumber\":3,\"DryWeight\":0,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2019-10-21T09:08:06.5756422+03:00\"},\"FeedingNumber\":1,\"IngredientLoadings\":[{\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"TargetOrdinalNumber\":1,\"ActualOrdinalNumber\":null,\"TargetWeight\":200,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"TargetOrdinalNumber\":2,\"ActualOrdinalNumber\":null,\"TargetWeight\":1000,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null}],\"PenUnloadings\":[{\"PenId\":\"Pen/4\",\"Pen\":{\"Id\":\"Pen/4\",\"Name\":\"31\",\"Description\":null,\"PenPhysiologicalGroups\":[{\"PhysiologicalGroupId\":\"PhysiologicalGroup/4\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/4\",\"Name\":\"Net 3-6\",\"Description\":null,\"Kind\":\"Young\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2019-10-21T09:09:36.9522821+03:00\"},\"HeadCount\":100}],\"Appetite\":1,\"OrdinalNumber\":4,\"DontCombine\":false,\"DigiStarMetadata\":{\"Code\":\"31\",\"UpperCode\":\"31\"},\"MixerId\":\"Mixer/1\",\"Mixer\":null,\"RationId\":\"Ration/3\",\"Ration\":{\"Id\":\"Ration/3\",\"Name\":\"Нетели\",\"Description\":null,\"Density\":250,\"IsPremix\":false,\"DryMatterProportion\":0.5,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"NET\",\"UpperCode\":\"NET\"},\"Kind\":\"Young\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":2,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":{\"Id\":\"Ingredient/0\",\"Name\":\"Вода\",\"Description\":\"Вода\",\"Type\":\"Water\",\"DigiStarMetadata\":{\"Code\":\"H2O\",\"UpperCode\":\"H2O\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":0,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0,\"Price\":0},\"OrdinalNumber\":3,\"DryWeight\":0,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2019-10-21T09:08:06.5756422+03:00\"},\"CreatedAt\":\"2019-10-21T09:10:08.5154434+03:00\",\"MilkProductivities\":[],\"RationParts\":[1]},\"TargetOrdinalNumber\":1,\"ActualOrdinalNumber\":null,\"TargetAsFedWeight\":1200,\"ActualInitialAsFedWeight\":null,\"ActualAdjustedAsFedWeight\":null,\"StartedAt\":null,\"CompletedAt\":null,\"UnloadingStatus\":\"Pending\",\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"CargoLoadingType\":\"Unloading\",\"InitialMixerWeight\":null,\"IsExecuting\":false}],\"MixerId\":\"Mixer/1\",\"Mixer\":{\"Id\":\"Mixer/1\",\"Name\":\"46\",\"Description\":\"\",\"Volume\":46,\"Pens\":null,\"Weight\":null,\"DataTransferType\":\"DigiStar\",\"CreatedAt\":null},\"Status\":\"Created\",\"State\":{\"Status\":\"Created\",\"OrdinalNumber\":null},\"CreatedAt\":\"2020-12-23T15:51:19.3238254+03:00\",\"StartedAt\":null,\"CompletedAt\":null,\"IsCompletedByUser\":null,\"CanceledAt\":null,\"RestoredAt\":null,\"ExecutionDate\":\"2020-10-28\",\"MixerOperator\":null,\"LoaderOperators\":null,\"@metadata\":{\"@collection\":\"FeedingTask\",\"Raven-Clr-Type\":\"EkoPoint.Feeding.Domain.Models.FeedingTask, EkoPoint.Feeding.Domain\",\"source-of-change\":\"User\"}}"
                },
                {
                    "FeedingTask/107",
                    "{\"Type\":\"Feeding\",\"DailyNumber\":4,\"RationId\":\"Ration/1\",\"Ration\":{\"Id\":\"Ration/1\",\"Name\":\"Д1\",\"Description\":\"\",\"Density\":350,\"IsPremix\":false,\"DryMatterProportion\":0.4202,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"D1\",\"UpperCode\":\"D1\"},\"Kind\":\"Diary\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":null,\"OrdinalNumber\":1,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":null,\"OrdinalNumber\":2,\"DryWeight\":4,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":null,\"OrdinalNumber\":3,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/5\",\"Ingredient\":null,\"OrdinalNumber\":4,\"DryWeight\":7,\"MixingTime\":\"00:00:10\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":null,\"OrdinalNumber\":5,\"DryWeight\":8,\"MixingTime\":\"00:01:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":null,\"OrdinalNumber\":6,\"DryWeight\":9.5,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2018-10-24T15:36:32.3376485+03:00\"},\"FeedingNumber\":2,\"IngredientLoadings\":[{\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"TargetOrdinalNumber\":1,\"ActualOrdinalNumber\":null,\"TargetWeight\":200,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"TargetOrdinalNumber\":2,\"ActualOrdinalNumber\":null,\"TargetWeight\":800,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/3\",\"Name\":\"Ingredients 3\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE3\",\"UpperCode\":\"INGRE3\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.9178469+03:00\",\"Timestamp\":\"2020-06-05T16:47:27.7245887+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"TargetOrdinalNumber\":3,\"ActualOrdinalNumber\":null,\"TargetWeight\":1000,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/5\",\"Name\":\"KK1\",\"Description\":\"\",\"Type\":\"CompoundFeed\",\"DigiStarMetadata\":{\"Code\":\"KK1\",\"UpperCode\":\"KK1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":600,\"Composition\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":{\"Id\":\"Ingredient/1\",\"Name\":\"Ingredients 1\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGE1\",\"UpperCode\":\"INGE1\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":true,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.6827190+03:00\",\"Timestamp\":\"2020-06-05T16:47:23.3436042+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":1,\"DryWeight\":0.25,\"Weight\":0.5,\"MixingTime\":\"00:01:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":{\"Id\":\"Ingredient/2\",\"Name\":\"Ingredients 2\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE2\",\"UpperCode\":\"INGRE2\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":true,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:30.3146350+03:00\",\"Timestamp\":\"2020-06-05T16:47:18.4563507+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":2},\"OrdinalNumber\":2,\"DryWeight\":0.25,\"Weight\":0.5,\"MixingTime\":\"00:02:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":{\"Id\":\"Ingredient/3\",\"Name\":\"Ingredients 3\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE3\",\"UpperCode\":\"INGRE3\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.9178469+03:00\",\"Timestamp\":\"2020-06-05T16:47:27.7245887+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"OrdinalNumber\":3,\"DryWeight\":0.25,\"Weight\":0.5,\"MixingTime\":\"00:03:00\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":{\"Id\":\"Ingredient/4\",\"Name\":\"Ingredients 4\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE4\",\"UpperCode\":\"INGRE4\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.3482787+03:00\",\"Timestamp\":\"2020-06-05T16:47:32.3143545+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"OrdinalNumber\":4,\"DryWeight\":0.25,\"Weight\":0.5,\"MixingTime\":\"00:04:00\"}],\"DryMatterProportion\":0.5,\"Price\":1.5,\"CompoundFeedIngredients\":[]},\"TargetOrdinalNumber\":4,\"ActualOrdinalNumber\":null,\"TargetWeight\":1400,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:10\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/4\",\"Name\":\"Ingredients 4\",\"Description\":null,\"Type\":\"Concentrate\",\"DigiStarMetadata\":{\"Code\":\"INGRE4\",\"UpperCode\":\"INGRE4\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":null,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":\"2018-10-24T15:36:29.3482787+03:00\",\"Timestamp\":\"2020-06-05T16:47:32.3143545+03:00\",\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0.5,\"Price\":1},\"TargetOrdinalNumber\":5,\"ActualOrdinalNumber\":null,\"TargetWeight\":1600,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:01:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0.5,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null},{\"Ingredient\":{\"Id\":\"Ingredient/0\",\"Name\":\"Вода\",\"Description\":\"Вода\",\"Type\":\"Water\",\"DigiStarMetadata\":{\"Code\":\"H2O\",\"UpperCode\":\"H2O\"},\"InStock\":100000,\"PeriodicLossFrequency\":\"None\",\"PeriodicLossProportion\":0,\"IsDryMatterDynamic\":false,\"IsUnderweight\":false,\"LoadingLossProportion\":0,\"RationIngredients\":null,\"CompoundFeedIngredients\":null,\"CreatedAt\":null,\"Timestamp\":null,\"Density\":null,\"Composition\":null,\"DryMatterProportion\":0,\"Price\":0},\"TargetOrdinalNumber\":6,\"ActualOrdinalNumber\":null,\"TargetWeight\":950,\"ActualInitialWeight\":null,\"ActualAdjustedWeight\":null,\"TargetMixingTime\":\"00:00:00\",\"ActualMixingTime\":null,\"StartedAt\":null,\"CompletedAt\":null,\"LoadingStatus\":\"Pending\",\"PtoRotationStatus\":null,\"DryMatterProportion\":0,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.CargoLoadingType\":\"Loading\",\"InitialMixerWeight\":null}],\"PenUnloadings\":[{\"PenId\":\"Pen/1\",\"Pen\":{\"Id\":\"Pen/1\",\"Name\":\"11\",\"Description\":null,\"PenPhysiologicalGroups\":[{\"PhysiologicalGroupId\":\"PhysiologicalGroup/1\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/1\",\"Name\":\"Д1\",\"Description\":null,\"Kind\":\"Diary\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2018-10-24T15:36:35.5023715+03:00\"},\"HeadCount\":60},{\"PhysiologicalGroupId\":\"PhysiologicalGroup/2\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/2\",\"Name\":\"Д2\",\"Description\":null,\"Kind\":\"Diary\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2018-10-24T15:36:35.2536378+03:00\"},\"HeadCount\":40}],\"Appetite\":1,\"OrdinalNumber\":1,\"DontCombine\":false,\"DigiStarMetadata\":{\"Code\":\"11\",\"UpperCode\":\"11\"},\"MixerId\":\"Mixer/1\",\"Mixer\":null,\"RationId\":\"Ration/1\",\"Ration\":{\"Id\":\"Ration/1\",\"Name\":\"Д1\",\"Description\":\"\",\"Density\":350,\"IsPremix\":false,\"DryMatterProportion\":0.4202,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"D1\",\"UpperCode\":\"D1\"},\"Kind\":\"Diary\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":null,\"OrdinalNumber\":1,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":null,\"OrdinalNumber\":2,\"DryWeight\":4,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":null,\"OrdinalNumber\":3,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/5\",\"Ingredient\":null,\"OrdinalNumber\":4,\"DryWeight\":7,\"MixingTime\":\"00:00:10\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":null,\"OrdinalNumber\":5,\"DryWeight\":8,\"MixingTime\":\"00:01:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":null,\"OrdinalNumber\":6,\"DryWeight\":9.5,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2018-10-24T15:36:32.3376485+03:00\"},\"CreatedAt\":\"2018-10-24T15:36:36.3578469+03:00\",\"MilkProductivities\":[],\"RationParts\":[0.5,0.5]},\"TargetOrdinalNumber\":1,\"ActualOrdinalNumber\":null,\"TargetAsFedWeight\":2975,\"ActualInitialAsFedWeight\":null,\"ActualAdjustedAsFedWeight\":null,\"StartedAt\":null,\"CompletedAt\":null,\"UnloadingStatus\":\"Pending\",\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"CargoLoadingType\":\"Unloading\",\"InitialMixerWeight\":null,\"IsExecuting\":false},{\"PenId\":\"Pen/2\",\"Pen\":{\"Id\":\"Pen/2\",\"Name\":\"12\",\"Description\":null,\"PenPhysiologicalGroups\":[{\"PhysiologicalGroupId\":\"PhysiologicalGroup/2\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/2\",\"Name\":\"Д2\",\"Description\":null,\"Kind\":\"Diary\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2018-10-24T15:36:35.2536378+03:00\"},\"HeadCount\":30},{\"PhysiologicalGroupId\":\"PhysiologicalGroup/1\",\"PhysiologicalGroup\":{\"Id\":\"PhysiologicalGroup/1\",\"Name\":\"Д1\",\"Description\":null,\"Kind\":\"Diary\",\"PenPhysiologicalGroups\":null,\"CreatedAt\":\"2018-10-24T15:36:35.5023715+03:00\"},\"HeadCount\":70}],\"Appetite\":1,\"OrdinalNumber\":2,\"DontCombine\":false,\"DigiStarMetadata\":{\"Code\":\"12\",\"UpperCode\":\"12\"},\"MixerId\":\"Mixer/1\",\"Mixer\":null,\"RationId\":\"Ration/1\",\"Ration\":{\"Id\":\"Ration/1\",\"Name\":\"Д1\",\"Description\":\"\",\"Density\":350,\"IsPremix\":false,\"DryMatterProportion\":0.4202,\"IngredientWeightChangeHandling\":\"AdjustDryMatter\",\"DigiStarMetadata\":{\"Code\":\"D1\",\"UpperCode\":\"D1\"},\"Kind\":\"Diary\",\"RationIngredients\":[{\"IngredientId\":\"Ingredient/1\",\"Ingredient\":null,\"OrdinalNumber\":1,\"DryWeight\":1,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/2\",\"Ingredient\":null,\"OrdinalNumber\":2,\"DryWeight\":4,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/3\",\"Ingredient\":null,\"OrdinalNumber\":3,\"DryWeight\":5,\"MixingTime\":\"00:00:00\"},{\"IngredientId\":\"Ingredient/5\",\"Ingredient\":null,\"OrdinalNumber\":4,\"DryWeight\":7,\"MixingTime\":\"00:00:10\"},{\"IngredientId\":\"Ingredient/4\",\"Ingredient\":null,\"OrdinalNumber\":5,\"DryWeight\":8,\"MixingTime\":\"00:01:00\"},{\"IngredientId\":\"Ingredient/0\",\"Ingredient\":null,\"OrdinalNumber\":6,\"DryWeight\":9.5,\"MixingTime\":\"00:00:00\"}],\"Pens\":null,\"CreatedAt\":\"2018-10-24T15:36:32.3376485+03:00\"},\"CreatedAt\":\"2018-10-24T15:36:36.8370786+03:00\",\"MilkProductivities\":[],\"RationParts\":[0.5,0.5]},\"TargetOrdinalNumber\":2,\"ActualOrdinalNumber\":null,\"TargetAsFedWeight\":2975,\"ActualInitialAsFedWeight\":null,\"ActualAdjustedAsFedWeight\":null,\"StartedAt\":null,\"CompletedAt\":null,\"UnloadingStatus\":\"Pending\",\"EkoPoint.Feeding.Domain.Abstractions.ICargoLoading.ActualCargoLoadingWeight\":null,\"CargoLoadingType\":\"Unloading\",\"InitialMixerWeight\":null,\"IsExecuting\":false}],\"MixerId\":\"Mixer/1\",\"Mixer\":{\"Id\":\"Mixer/1\",\"Name\":\"46\",\"Description\":\"\",\"Volume\":46,\"Pens\":null,\"Weight\":null,\"DataTransferType\":\"DigiStar\",\"CreatedAt\":null},\"Status\":\"Created\",\"State\":{\"Status\":\"Created\",\"OrdinalNumber\":null},\"CreatedAt\":\"2020-12-23T15:51:19.4718003+03:00\",\"StartedAt\":null,\"CompletedAt\":null,\"IsCompletedByUser\":null,\"CanceledAt\":null,\"RestoredAt\":null,\"ExecutionDate\":\"2020-10-28\",\"MixerOperator\":null,\"LoaderOperators\":null,\"@metadata\":{\"@collection\":\"FeedingTask\",\"Raven-Clr-Type\":\"EkoPoint.Feeding.Domain.Models.FeedingTask, EkoPoint.Feeding.Domain\",\"source-of-change\":\"User\"}}"
                }
            };
        }

        public static string GetApplicationRoot()
        {
            var exePath = Path.GetDirectoryName(Process.GetCurrentProcess().MainModule.FileName);
            var appPathMatcher = new Regex(@"(?<!fil)[A-Za-z]:\\+[\S\s]*?(?=\\+bin)");
            var appRoot = appPathMatcher.Match(exePath).Value;
            return appRoot;
        }
    }
}
